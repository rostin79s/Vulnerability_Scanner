import net.jcip.annotations.ThreadSafe;
@ThreadSafe
public class Test_corrected {
 int shares = 0;
 
 public synchronized void buy(int count) {
   if (count > 0) {
     shares += count;
   }
 }

 public synchronized int sell(int count){
   if (count >= 0 && shares - count >= 0) {
     shares -= count;
     return shares;
   } else {
     return 0;
   }
 }
}