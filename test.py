import google.generativeai as genai
import os
from dotenv import load_dotenv

load_dotenv()
GOOGLE_API_KEY=os.getenv('GOOGLE_API_KEY')

def get_code(filename):
    with open(filename ,'r') as file:
        data = file.read()
    return data

genai.configure(api_key=GOOGLE_API_KEY)

model = genai.GenerativeModel('gemini-pro')

filename = "thread_race.cpp"
prompt = get_code(filename) + "\n is this code vulnerable? if it is please fix it and give me the correct version. Only add libraries necssary to fix the change."
print(prompt)

response = model.generate_content(prompt)
print(response.text)